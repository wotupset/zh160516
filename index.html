<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>#illyadance</title>
<style type="text/css">
@import url(https://fonts.googleapis.com/css?family=Advent+Pro:100);
#overlay {
    font-family: 'Advent Pro', sans-serif;
	font-size: 7em;
	color: rgba(255, 255, 255, 1);
	z-index: 10;
	margin: .2em .5em;
	position: fixed; 
	left: 100; 
	top: 0;
}
video#bgvid { 
	position: fixed; 
	left: 100; 
	top: 0;
	width: auto; 
	height: 600; 
	z-index: 5;
	background-size: cover;
	background-image: url("http://i.imgur.com/9FagndK.jpg");
}
div#text {
	position: fixed; 
	left: 0; 
	top: 0;
	z-index: 1;
}
</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" language="javascript">
$(document).ready(function() {
	//全域變數//global
	time = new Date();
	gginin=[];ggobj={};
	//
	gginin.index=[];
	gginin.index.s01="1.txt";
	gginin.video=[];
	gginin.video.s01='https://video.twimg.com/ext_tw_video/771913728681844736/pu/vid/1280x720/LgFb_pTF8iVeFNYd.mp4';
	gginin.video.s02='https://video.twimg.com/ext_tw_video/769837180248203266/pu/vid/1280x720/bUseY743xyh9g83F.mp4';
	gginin.video.s03='https://video.twimg.com/ext_tw_video/767245366508924928/pu/vid/1280x720/lwYb7ePKCEdMegsk.mp4';
	ggobj.url={};
	//
	//console.log(gginin);
	//console.log(ggobj);
	
	loadDoc();
	//poi();
	videoListener();
});

function videoListener(){
	var cc=cc2=0;
	var video = document.getElementById('bgvid');
	var source = document.createElement('source');
	source.setAttribute('src', "");//ggobj.url.v01
	video.appendChild(source);
	//video.play();

	document.getElementById('bgvid').addEventListener('ended', function(e){
		//console.log("video end1");
		cc2++;
	});
	video.onended = function(e){
		//console.log("video end2");
	};
	$("#bgvid").bind("onended", function() {
		//console.log("video end3");
	});
	
	while(cc<5){
		source.setAttribute('src', gginin.video.s01 );//
		video.play();
		//
		console.log("cc="cc);
		console.log("cc2="cc2);
		cc++;	
		if(cc>10){break;}
	}
}
function loadDoc() {
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			document.getElementById("ddd").innerHTML = this.responseText;
			poi2();
		}else{
			document.getElementById("ddd").innerHTML = this.status;
		}
	};
	
	xhttp.open("GET", gginin.index.s01);
	xhttp.send();
}
function poi2(){
	
	$("#ddd").html("");// (inner HTML)。
	
	var request=$.ajax({
	url: gginin.index.s01,
	type: "GET",
	contentType: "text/plain",
	dataType:"text",
	async: true
	})
	.done(function(data, textStatus, jqXHR) {
	//alert( "success" );

		var str=tmp='';
		//alert(data);//原始資料
		data = data.split("\r").join("");
		//data.replace(/\r/g, "");//失敗
		str = data.split("\n");//切割
		//alert(str.length);//陣列長度
		for(i=0;i<str.length;i++){
			//document.getElementById("ddd").innerHTML="沒了";
			//data=decodeURIComponent(data);
			//query=encodeURIComponent(query);
			//str[i]=str[i].trim();
			if(str[i].trim().length>0){
				tmp='./'+encodeURIComponent(str[i]);
				$("#ddd").append('<a href="'+tmp+'">'+tmp+'</a><br/>');
			}
			
		}



	})
	.fail(function(jqXHR, textStatus, errorThrown) {
	//alert( "error" );
	})
	.always(function(data, textStatus, jqXHR) {
	//alert( "complete" );
	});
}









function poi(){
	$.get('1.txt', function(data) { //讀取文字檔
		var str=tmp='';
		//alert(data);//原始資料
		data = data.split("\r").join("");
		//data.replace(/\r/g, "");//失敗
		str = data.split("\n");//切割
		//alert(str.length);//陣列長度
		for(i=0;i<str.length;i++){
			//document.getElementById("ddd").innerHTML="沒了";
			//data=decodeURIComponent(data);
			//query=encodeURIComponent(query);
			//str[i]=str[i].trim();
			if(str[i].trim().length>0){
				tmp='./'+encodeURIComponent(str[i]);
				$("#ddd").append('<a href="'+tmp+'">'+tmp+'</a><br/>');
			}
			
		}
	});
	//


	myVid=document.getElementById("bgvid");
	myVid.volume=0.41;//一半的音量

}
</script>
</head> 
<body>
<video controls id="bgvid">
您的浏览器不支持 video 标签。

</video>




<div id="overlay">#illyadance</div>
<div id="ddd"></div>
</body></html>
